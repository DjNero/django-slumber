#!/usr/bin/env bash
cd `dirname $0`

source virtualenvwrapper.sh

workon slumber1-0
cd test-projects/django1_0
if python manage.py test slumber_test
then {
    workon slumber1-3
    cd ../django1_3
    if python manage.py test slumber_test \
            --with-coverage --cover-erase \
            --cover-package=slumber --cover-package=slumber_test
    then {
        cd ../..
        pylint --rcfile=pylintrc --output-format=colorized slumber
    } else {
        exit 1
    }
    fi
} else {
    exit 1
}
fi
